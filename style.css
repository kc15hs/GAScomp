/* === ベース === */
* { box-sizing: border-box; }
html, body {
  margin: 0;
  height: 100%;
  background: #0b0b0c;
  color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
}
.app-bar {
  position: sticky;
  top: 0;
  z-index: 2;
  background: #101115;
  border-bottom: 1px solid #222;
  padding: 12px 16px;
  text-align: center;
}
.app-bar h1 { margin: 0; font-size: 16px; font-weight: 700; }
.container { padding: 16px 12px 96px; max-width: 880px; margin: 0 auto; }
.card {
  background: #12131a;
  border: 1px solid #20222b;
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 12px;
}
.card h2 { margin: 2px 0 10px; font-size: 14px; color: #9fb0ff; font-weight: 700; }

/* === 基本入力 === */
.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  align-items: center;
}
.titles { margin-bottom: 6px; }
.titles .th { font-size: 12px; opacity: .85; }
.inputs input[type=number] { width: 100%; }
input[type=number], input[type=text], input[type=date]{
  width: 100%;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid #2a2e3a;
  background: #0f1118;
  color: #fff;
  font-size: 16px;
}
input::placeholder { color: #6d7280; }

/* === 区間タイトル行（選択は現状の幅、他は 10:25:25:25:10:5 ） === */
.segments-title{
  display: grid;
  grid-template-columns: 5% minmax(0,10fr) minmax(0,25fr) minmax(0,25fr) minmax(0,25fr) minmax(0,10fr) minmax(0,5fr);
  gap: 8px;
  font-size: 12px;
  margin-bottom: 6px;
  opacity: 0.8;
}
.segments-title > span{
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
/* タイトル揃え：日付・人数・削除は中央、距離3つは右寄せ */
.segments-title > span:nth-child(2),
.segments-title > span:nth-child(6),
.segments-title > span:nth-child(7){ text-align: center; }
.segments-title > span:nth-child(3),
.segments-title > span:nth-child(4),
.segments-title > span:nth-child(5){ text-align: right; }

/* === 区間入力行 === */
.segments{ display: grid; gap: 8px; }

.seg{
  display: grid;
  grid-template-columns: 5% minmax(0,10fr) minmax(0,25fr) minmax(0,25fr) minmax(0,25fr) minmax(0,10fr) minmax(0,5fr);
  gap: 8px;
  align-items: center;
}
.seg input[type=checkbox]{ transform: scale(1.15); }

.seg input[type=number], .seg input[type=text]{
  padding: 8px;
  border-radius: 8px;
  border: 1px solid #2a2e3a;
  background: #0f1118;
  color: #fff;
  font-size: 14px;
  min-width: 0;
}

/* 日付・人数・削除は中央寄せ（行） */
.seg > :nth-child(2),
.seg > :nth-child(6),
.seg > :nth-child(7){
  display: flex;
  justify-content: center;
  align-items: center;
}

/* 日付テキスト/ピッカー */
.date-wrapper{ position: relative; width: 100%; }
.seg-date-picker{
  position: absolute;
  inset: 0;
  opacity: 0;
  pointer-events: none; /* テキスト欄クリックで showPicker() */
}
.seg input.seg-date{ text-align: center; }

/* 距離3項目は右寄せ（行の入力） */
.seg input.seg-km,
.seg input.seg-start,
.seg input.seg-end{ text-align: right; }

/* 割り勘人数は中央寄せ＆折返し防止 */
.seg input.seg-people{ text-align: center; }

/* 削除ボタン */
.seg button{
  border: 1px solid #2a2e3a;
  background: #181b27;
  color: #fff;
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
  white-space: nowrap;
}

/* === 行操作ボタン === */
.segment-actions{
  display: flex;
  gap: 8px;
  margin-top: 8px;
  flex-wrap: wrap;
}
.segment-actions button{
  border: 1px solid #2a2e3a;
  background: #181b27;
  color: #fff;
  padding: 10px 12px;
  border-radius: 10px;
  cursor: pointer;
}

/* === 合計距離 === */
.sumline{ margin-top: 8px; font-size: 14px; opacity: .9; }

/* === 結果 === */
.result-grid{ display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.label{ font-size: 12px; opacity: .8; }
.value{ font-size: 20px; font-weight: 800; }
.note{ margin-top: 8px; color: #ffb3b3; font-size: 12px; min-height: 1em; }
.actions{ display: flex; gap: 8px; margin-top: 12px; }
.actions button{
  border: 0; background: #fff; color: #111;
  padding: 12px; border-radius: 10px; font-weight: 800; cursor: pointer;
}
.actions .ghost{ background: #1a1d28; color: #fff; border: 1px solid #2a2e3a; }

/* === フッター === */
.foot-note{
  position: fixed; left: 0; right: 0; bottom: 0;
  padding: 10px 12px; background: #101115; border-top: 1px solid #20222b;
  text-align: center; color: #9aa0ae; font-size: 12px;
}
@supports(padding:max(0px)){
  .foot-note{ padding-bottom: max(10px, env(safe-area-inset-bottom)); }
}

/* === スモール画面（比率維持で圧縮） === */
@media (max-width: 560px){
  .segments-title,
  .seg{
    grid-template-columns: 9% minmax(0,10fr) minmax(0,25fr) minmax(0,25fr) minmax(0,25fr) minmax(0,10fr) minmax(0,5fr);
  }
}
